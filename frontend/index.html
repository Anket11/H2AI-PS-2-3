<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Nurse Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f8f9fa;
    }
    h1 {
      margin-bottom: 10px;
    }
    .patient-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .patient-card {
      background: #fff;
      padding: 15px;
      border-radius: 5px;
      width: 220px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .patient-card h3 {
      margin-bottom: 5px;
    }
    .patient-card p {
      margin: 0 0 8px 0;
    }
    .manage-btn {
      background: #007bff;
      color: #fff;
      padding: 8px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
    }
    .manage-btn:hover {
      background: #0056b3;
    }
    .reset-btn {
      background: #dc3545;
      color: #fff;
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      margin-bottom: 20px;
    }
    .reset-btn:hover {
      background: #c82333;
    }
  </style>
</head>
<body>
  <h1>Nurse Dashboard</h1>
  <button id="resetBtn" class="reset-btn">Reset Data</button>
  <p>Click a patient to manage discharge details and checkâ€‘in responses.</p>
  <div class="patient-list" id="patientList"></div>
  <script>
   // Pre-populated default patient data.
const defaultPatients = [
  {
    id: 1,
    name: "John Doe",
    status: "In Hospital",
    admissionReason: "Pneumonia",
    dischargeDetails: null,
    checkIns: []
  },
  {
    id: 2,
    name: "Jane Smith",
    status: "Discharged",
    admissionReason: "Appendicitis",
    dischargeDetails: {
      dischargeDate: "2025-03-01T10:00",
      diagnosis: "K35.2 (Acute appendicitis)",
      dischargeSummary: "Appendix removed. Patient is stable.",
      medications: [
        { name: "Acetaminophen", dosage: "500 mg", frequency: "Q6H PRN" }
      ],
      activityRestrictions: "No heavy lifting for 2 weeks.",
      dietRecommendations: "Regular diet, stay hydrated.",
      redFlagSymptoms: "Severe abdominal pain, fever, vomiting.",
      nextFollowupDue: "Check-up in 7 days",
      contactForEmergency: "(555) 987-6543 or nearest ER",
      dischargeInstructions: "Keep incision clean, watch for infection.",
      checkInTemplate: {
        questions: ["Medication taken?", "Symptoms", "How are you feeling?"]
      },
      checkInInstances: ["2025-03-02", "2025-03-03", "2025-03-04"],
      expectedCheckIns: 3
    },
    checkIns: [
      {
        date: "2025-03-02",
        response: {
          "Medication taken?": "Yes",
          "Symptoms": "Mild pain",
          "How are you feeling?": "Good"
        },
        status: "completed"
      },
      {
        date: "2025-03-03",
        response: {
          "Medication taken?": "",
          "Symptoms": "",
          "How are you feeling?": ""
        },
        status: "pending"
      },
      {
        date: "2025-03-04",
        response: {
          "Medication taken?": "No",
          "Symptoms": "Severe pain",
          "How are you feeling?": "Poor"
        },
        status: "completed"
      }
    ]
  },
  {
    id: 3,
    name: "Mark Johnson",
    status: "In Hospital",
    admissionReason: "Hip Surgery",
    dischargeDetails: null,
    checkIns: []
  }
];

    // Reset Data button handler.
    const resetBtn = document.getElementById("resetBtn");
    resetBtn.addEventListener("click", () => {
      // Clear localStorage and reinitialize default data.
      localStorage.setItem("patientsData", JSON.stringify(defaultPatients));
      // Reload the page to reflect changes.
      location.reload();
    });
    
    // Initialize patient data if not already present.
    if (!localStorage.getItem("patientsData")) {
      localStorage.setItem("patientsData", JSON.stringify(defaultPatients));
    }
    
    const patientListEl = document.getElementById("patientList");
    const patientsData = JSON.parse(localStorage.getItem("patientsData"));
    patientsData.forEach(patient => {
      const card = document.createElement("div");
      card.className = "patient-card";
      card.innerHTML = `
        <h3>${patient.name}</h3>
        <p>Status: ${patient.status}</p>
        <p>Reason: ${patient.admissionReason}</p>
        <a class="manage-btn" href="patient.html?patientId=${patient.id}">Manage</a>
      `;
      patientListEl.appendChild(card);
    });
  </script>
</body>
</html>
